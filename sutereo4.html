<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è‰²ä»˜ãï¼†é»’ã®ã¿æ•°å­—ã‚¹ãƒ†ãƒ¬ã‚ªã‚°ãƒ©ãƒ ã‚²ãƒ¼ãƒ </title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      text-align: center;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .controls {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 25px;
      backdrop-filter: blur(5px);
    }
    
    label {
      font-size: 1.1rem;
      font-weight: 600;
      margin-right: 10px;
    }
    
    select {
      font-size: 1rem;
      padding: 10px 15px;
      border: none;
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      outline: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    select:hover {
      background: rgba(255, 255, 255, 1);
      transform: translateY(-2px);
    }
    
    #instructions {
      font-size: 1.1rem;
      line-height: 1.6;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
      border-left: 4px solid #4ecdc4;
    }
    
    .canvas-container {
      position: relative;
      display: inline-block;
      margin: 20px 0;
    }
    
    canvas {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      background: #f0f0f0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    
    canvas:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }
    
    .input-section {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      backdrop-filter: blur(5px);
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }
    
    input[type="text"] {
      font-size: 1.5rem;
      padding: 15px 25px;
      border: none;
      border-radius: 30px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      outline: none;
      text-align: center;
      transition: all 0.3s ease;
      min-width: 150px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    input[type="text"]:focus {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }
    
    button {
      font-size: 1.1rem;
      padding: 15px 30px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      min-width: 140px;
    }
    
    #submitGuess {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      color: white;
    }
    
    #submitGuess:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(238, 90, 36, 0.4);
    }
    
    #submitGuess:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    #changeNumber {
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      color: white;
    }
    
    #changeNumber:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(68, 160, 141, 0.4);
    }
    
    #hintButton {
      background: linear-gradient(45deg, #feca57, #ff9ff3);
      color: white;
    }
    
    #hintButton:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(254, 202, 87, 0.4);
    }
    
    #result {
      font-size: 1.3rem;
      font-weight: 600;
      margin-top: 15px;
      padding: 15px;
      border-radius: 10px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .correct {
      background: linear-gradient(45deg, #00b894, #00cec9);
      color: white;
      animation: pulse 1s ease-in-out;
    }
    
    .incorrect {
      background: linear-gradient(45deg, #e17055, #d63031);
      color: white;
      animation: shake 0.5s ease-in-out;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .tips {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    
    .tips h3 {
      margin-top: 0;
      color: #4ecdc4;
    }

    .number-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3åˆ— */
      gap: 10px;
      margin-top: 20px;
      max-width: 350px; /* ãƒœã‚¿ãƒ³ã®å¹…ã‚’èª¿æ•´ */
      margin-left: auto;
      margin-right: auto;
    }

    .number-buttons button {
      font-size: 1.8rem; /* ãƒœã‚¿ãƒ³ã®æ•°å­—ã‚’å¤§ãã */
      padding: 15px 0;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
    }

    .number-buttons button:hover {
      background: #e0e0e0;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .number-buttons button:active {
      transform: translateY(0);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .number-buttons .delete-button {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      color: white;
      grid-column: span 2; /* Deleteãƒœã‚¿ãƒ³ã‚’2åˆ—ã«åºƒã’ã‚‹ */
    }
    .number-buttons .delete-button:hover {
      background: linear-gradient(45deg, #ff8c8c, #f0744d);
    }
    .number-buttons .zero-button {
      grid-column: span 1; /* 0ãƒœã‚¿ãƒ³ã‚’1åˆ—ã« */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âœ¨ æ•°å­—ã‚¹ãƒ†ãƒ¬ã‚ªã‚°ãƒ©ãƒ ã‚²ãƒ¼ãƒ  âœ¨</h1>
    
    <div class="controls">
      <label for="levelSelect">ğŸ¯ ãƒ¢ãƒ¼ãƒ‰é¸æŠ: </label>
      <select id="levelSelect">
        <option value="digit1_color">ğŸŒˆ è‰²ä»˜ãæ•°å­— ãƒ¬ãƒ™ãƒ«1 (1æ¡: 0ï½9)</option>
        <option value="digit2_color">ğŸŒˆ è‰²ä»˜ãæ•°å­— ãƒ¬ãƒ™ãƒ«2 (2æ¡: 10ï½99)</option>
        <option value="digit3_color">ğŸŒˆ è‰²ä»˜ãæ•°å­— ãƒ¬ãƒ™ãƒ«3 (3æ¡: 100ï½999)</option>
        <option value="digit1_bw">âš« é»’ã®ã¿æ•°å­— ãƒ¬ãƒ™ãƒ«1 (1æ¡: 0ï½9)</option>
        <option value="digit2_bw">âš« é»’ã®ã¿æ•°å­— ãƒ¬ãƒ™ãƒ«2 (2æ¡: 10ï½99)</option>
        <option value="digit3_bw">âš« é»’ã®ã¿æ•°å­— ãƒ¬ãƒ™ãƒ«3 (3æ¡: 100ï½999)</option>
      </select>
    </div>



    <div class="canvas-container">
      <canvas id="stereoCanvas" width="500" height="350"></canvas>
    </div>

    <div class="input-section">
      <input type="text" id="guess" placeholder="0ï½9 ã®æ•°å­—ã‚’å…¥åŠ›" maxlength="1" autocomplete="off" readonly>
      <button id="submitGuess">ğŸ¯ å›ç­”</button>
      <button id="changeNumber">ğŸ”„ æ–°ã—ã„å•é¡Œ</button>
      <button id="hintButton">ğŸ’¡ ãƒ’ãƒ³ãƒˆ</button>
    </div>

    <div class="number-buttons">
      <button class="num-button" data-value="1">1</button>
      <button class="num-button" data-value="2">2</button>
      <button class="num-button" data-value="3">3</button>
      <button class="num-button" data-value="4">4</button>
      <button class="num-button" data-value="5">5</button>
      <button class="num-button" data-value="6">6</button>
      <button class="num-button" data-value="7">7</button>
      <button class="num-button" data-value="8">8</button>
      <button class="num-button" data-value="9">9</button>
      <button class="num-button zero-button" data-value="0">0</button>
      <button class="delete-button" data-value="delete">DEL</button>
    </div>

    <div id="result"></div>


  </div>

  <script>
    // å„è¦ç´ ã®å–å¾—
    const canvas = document.getElementById('stereoCanvas');
    const ctx = canvas.getContext('2d');
    const canvasWidth = canvas.width;
    const canvasHeight = canvas.height;
    const resultEl = document.getElementById('result');
    const guessInput = document.getElementById('guess');
    const levelSelect = document.getElementById('levelSelect');
    const submitButton = document.getElementById('submitGuess');
    const hintButton = document.getElementById('hintButton');
    const numberButtons = document.querySelectorAll('.num-button, .delete-button');

    let hiddenAnswer; // å‡ºé¡Œã•ã‚Œã‚‹éš ã—æ•°å­—ï¼ˆæ–‡å­—åˆ—ï¼‰
    let hintUsed = false; // ãƒ’ãƒ³ãƒˆä½¿ç”¨ãƒ•ãƒ©ã‚°
    let gameActive = true; // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ãƒ•ãƒ©ã‚°

    // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚«ãƒ©ãƒ¼ã‚’è¿”ã™ï¼ˆè‰²ä»˜ãç”¨ï¼‰- ã‚ˆã‚Šé®®ã‚„ã‹ã§è¦‹ã‚„ã™ã„è‰²ã«èª¿æ•´
    function randomColor() {
      const colors = [
        { r: 255, g: 100, b: 100 },  // èµ¤ç³»
        { r: 100, g: 255, b: 100 },  // ç·‘ç³»
        { r: 100, g: 100, b: 255 },  // é’ç³»
        { r: 255, g: 255, b: 100 },  // é»„ç³»
        { r: 255, g: 100, b: 255 },  // ãƒã‚¼ãƒ³ã‚¿ç³»
        { r: 100, g: 255, b: 255 },  // ã‚·ã‚¢ãƒ³ç³»
      ];
      const baseColor = colors[Math.floor(Math.random() * colors.length)];
      return {
        r: Math.max(50, Math.min(255, baseColor.r + (Math.random() - 0.5) * 100)),
        g: Math.max(50, Math.min(255, baseColor.g + (Math.random() - 0.5) * 100)),
        b: Math.max(50, Math.min(255, baseColor.b + (Math.random() - 0.5) * 100))
      };
    }

    // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆé»’ã®ã¿ç”¨ï¼‰- ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’æ”¹å–„
    function randomGray() {
      const val = Math.floor(Math.random() * 150) + 50; // 50-200ã®ç¯„å›²ã§ã‚ˆã‚Šè¦‹ã‚„ã™ã
      return { r: val, g: val, b: val };
    }

    // ã‚¹ãƒ†ãƒ¬ã‚ªã‚°ãƒ©ãƒ ç”Ÿæˆé–¢æ•°ï¼ˆæ”¹è‰¯ç‰ˆï¼‰
    function generateStereogram() {
      resultEl.textContent = "";
      resultEl.className = "";
      hintUsed = false;
      gameActive = true;
      submitButton.disabled = false;
      guessInput.value = ""; // æ–°ã—ã„å•é¡Œç”Ÿæˆæ™‚ã«å›ç­”æ¬„ã‚’ã‚¯ãƒªã‚¢
      
      const mode = levelSelect.value;

      // ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸéš ã—æ•°å­—ã®ç”Ÿæˆ
      if (mode.indexOf("digit1") !== -1) {
        hiddenAnswer = String(Math.floor(Math.random() * 10));   // 0ï½9
      } else if (mode.indexOf("digit2") !== -1) {
        hiddenAnswer = String(Math.floor(Math.random() * 90) + 10); // 10ï½99
      } else if (mode.indexOf("digit3") !== -1) {
        hiddenAnswer = String(Math.floor(Math.random() * 900) + 100); // 100ï½999
      }
      console.log("éš ã—ç­”ãˆï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰:", hiddenAnswer);

      // ã‚ˆã‚Šå¤§ããã€å¤ªã„æ–‡å­—ã§æ·±åº¦ãƒãƒƒãƒ—ã‚’ä½œæˆ
      const offCanvas = document.createElement('canvas');
      offCanvas.width = canvasWidth;
      offCanvas.height = canvasHeight;
      const offCtx = offCanvas.getContext('2d');
      offCtx.fillStyle = "black";
      offCtx.fillRect(0, 0, canvasWidth, canvasHeight);
      offCtx.fillStyle = "white";
      
      // ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å‹•çš„ã«èª¿æ•´
      let fontSize = hiddenAnswer.length === 1 ? 280 : hiddenAnswer.length === 2 ? 200 : 140;
      offCtx.font = `bold ${fontSize}px Arial, sans-serif`;
      offCtx.textAlign = "center";
      offCtx.textBaseline = "middle";
      
      // æ–‡å­—ã‚’å¤ªãã™ã‚‹ãŸã‚ã«è¤‡æ•°å›æç”»
      for (let i = 0; i < 3; i++) {
        offCtx.fillText(hiddenAnswer, canvasWidth / 2 + i, canvasHeight / 2 + i);
      }

      // ãƒ”ã‚¯ã‚»ãƒ«æƒ…å ±ã‹ã‚‰æ·±åº¦ãƒãƒƒãƒ—ã‚’ä½œæˆ
      const offData = offCtx.getImageData(0, 0, canvasWidth, canvasHeight);
      let depthMap = [];
      for (let y = 0; y < canvasHeight; y++) {
        depthMap[y] = [];
        for (let x = 0; x < canvasWidth; x++) {
          const index = (y * canvasWidth + x) * 4;
          // ã‚ˆã‚Šå¼·ã„æ·±åº¦åŠ¹æœã®ãŸã‚ã«å€¤ã‚’èª¿æ•´
          depthMap[y][x] =
            (offData.data[index] > 150 &&
            offData.data[index + 1] > 150 &&
            offData.data[index + 2] > 150) ? 0.4 : 0;
        }
      }

      // ã‚¹ãƒ†ãƒ¬ã‚ªã‚°ãƒ©ãƒ ç”»åƒç”Ÿæˆï¼ˆæ”¹è‰¯ç‰ˆï¼‰
      const eyeSeparation = 80; // ç›®ã®åˆ†é›¢ã‚’å¤§ããã—ã¦åŠ¹æœã‚’å¼·åŒ–
      const stereoImage = ctx.createImageData(canvasWidth, canvasHeight);
      for (let y = 0; y < canvasHeight; y++) {
        let row = new Array(canvasWidth);
        
        // ã‚ˆã‚Šè¦å‰‡çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§åˆæœŸåŒ–
        for (let x = 0; x < eyeSeparation; x++) {
          if (mode.indexOf("_color") !== -1) {
            row[x] = randomColor();
          } else {
            row[x] = randomGray();
          }
        }
        
        // æ·±åº¦ãƒãƒƒãƒ—ã«å¿œã˜ãŸã‚·ãƒ•ãƒˆã‚’é©ç”¨
        for (let x = eyeSeparation; x < canvasWidth; x++) {
          const shift = Math.round(eyeSeparation * depthMap[y][x]);
          const srcIndex = x - eyeSeparation + shift;
          if (srcIndex < 0 || srcIndex >= x) {
            if (mode.indexOf("_color") !== -1) {
              row[x] = randomColor();
            } else {
              row[x] = randomGray();
            }
          } else {
            row[x] = row[srcIndex];
          }
        }
        
        // ç”Ÿæˆã—ãŸè¡Œãƒ‡ãƒ¼ã‚¿ã‚’ç”»åƒãƒ‡ãƒ¼ã‚¿ã«åæ˜ 
        for (let x = 0; x < canvasWidth; x++) {
          const idx = (y * canvasWidth + x) * 4;
          stereoImage.data[idx]     = row[x].r;
          stereoImage.data[idx + 1] = row[x].g;
          stereoImage.data[idx + 2] = row[x].b;
          stereoImage.data[idx + 3] = 255;
        }
      }
      ctx.putImageData(stereoImage, 0, 0);
    }

    // ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®å‡¦ç†
    levelSelect.addEventListener("change", function () {
      const mode = levelSelect.value;
      if (mode.indexOf("digit1") !== -1) {
        guessInput.placeholder = "0ï½9 ã®æ•°å­—ã‚’å…¥åŠ›";
        guessInput.maxLength = "1";
      } else if (mode.indexOf("digit2") !== -1) {
        guessInput.placeholder = "10ï½99 ã®æ•°å­—ã‚’å…¥åŠ›";
        guessInput.maxLength = "2";
      } else if (mode.indexOf("digit3") !== -1) {
        guessInput.placeholder = "100ï½999 ã®æ•°å­—ã‚’å…¥åŠ›";
        guessInput.maxLength = "3";
      }
      generateStereogram();
    });

    // åˆå›å‡ºé¡Œã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¨­å®š
    generateStereogram();
    // setTimeout(() => guessInput.focus(), 500); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦

    // ã€Œå›ç­”ã€ãƒœã‚¿ãƒ³ã®å‡¦ç†
    submitButton.addEventListener("click", function () {
      if (!gameActive) return;
      
      const userGuess = guessInput.value.trim();
      if (userGuess === "") {
        resultEl.textContent = "ğŸ“ æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
        resultEl.className = "";
        // guessInput.focus(); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦
        return;
      }
      
      gameActive = false;
      submitButton.disabled = true;
      
      if (userGuess === hiddenAnswer) {
        const scoreText = hintUsed ? "ğŸ‰ æ­£è§£ï¼ï¼ˆãƒ’ãƒ³ãƒˆä½¿ç”¨ï¼‰" : "ğŸ‰ å®Œç’§ãªæ­£è§£ï¼";
        resultEl.textContent = scoreText;
        resultEl.className = "correct";
        setTimeout(() => {
          guessInput.value = "";
          generateStereogram();
          // guessInput.focus(); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦
        }, 1500);
      } else {
        resultEl.textContent = `âŒ æ­£è§£ã¯ ${hiddenAnswer} ã§ã—ãŸ`;
        resultEl.className = "incorrect";
        setTimeout(() => {
          guessInput.value = "";
          generateStereogram();
          // guessInput.focus(); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦
        }, 2500);
      }
    });

    // ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ã®å‡¦ç†
    hintButton.addEventListener("click", function () {
      if (!gameActive || hintUsed) return;
      
      hintUsed = true;
      const mode = levelSelect.value;
      let hintText = "";
      
      if (mode.indexOf("digit1") !== -1) {
        const num = parseInt(hiddenAnswer);
        hintText = num % 2 === 0 ? "å¶æ•°ã§ã™" : "å¥‡æ•°ã§ã™";
      } else if (mode.indexOf("digit2") !== -1) {
        const num = parseInt(hiddenAnswer);
        const tens = Math.floor(num / 10);
        hintText = `åã®ä½ã¯ ${tens} ã§ã™`;
      } else if (mode.indexOf("digit3") !== -1) {
        const num = parseInt(hiddenAnswer);
        const hundreds = Math.floor(num / 100);
        hintText = `ç™¾ã®ä½ã¯ ${hundreds} ã§ã™`;
      }
      
      resultEl.textContent = `ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ${hintText}`;
      resultEl.className = "";
      // guessInput.focus(); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦
    });

    // ã€Œæ–°ã—ã„å•é¡Œã€ãƒœã‚¿ãƒ³ã®å‡¦ç†
    document.getElementById("changeNumber").addEventListener("click", function () {
      generateStereogram();
      guessInput.value = "";
      // guessInput.focus(); // ãƒœã‚¿ãƒ³å…¥åŠ›ã®ãŸã‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯ä¸è¦
    });

    // æ•°å­—ãƒœã‚¿ãƒ³ã®å‡¦ç†
    numberButtons.forEach(button => {
      button.addEventListener('click', function() {
        if (!gameActive) return;

        const buttonValue = this.dataset.value;
        const currentInput = guessInput.value;
        const maxLength = parseInt(guessInput.maxLength);

        if (buttonValue === 'delete') {
          guessInput.value = currentInput.slice(0, -1);
        } else {
          if (currentInput.length < maxLength) {
            guessInput.value += buttonValue;
          }
        }
        
        // å…¥åŠ›ãŒã‚ã‚‹ç¨‹åº¦ã‚ã‚Œã°å›ç­”ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
        if (guessInput.value.length > 0) {
          submitButton.disabled = false;
        } else {
          submitButton.disabled = true;
        }
      });
    });

    // Enterã‚­ãƒ¼ã§ã®æ“ä½œ (ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ãŒreadonlyã«ãªã£ãŸãŸã‚ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ä¸è¦ã«ãªã‚‹ãŒã€å¿µã®ãŸã‚æ®‹ã™)
    guessInput.addEventListener("keypress", function (e) {
      if (e.key === "Enter" && gameActive) {
        submitButton.click();
      }
    });

    // æ•°å­—ä»¥å¤–ã®å…¥åŠ›ã‚’åˆ¶é™ (ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ãŒreadonlyã«ãªã£ãŸãŸã‚ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ä¸è¦ã«ãªã‚‹ãŒã€å¿µã®ãŸã‚æ®‹ã™)
    guessInput.addEventListener("input", function (e) {
      this.value = this.value.replace(/[^0-9]/g, '');
      if (this.value.length > 0 && gameActive) {
        submitButton.disabled = false;
      }
    });

    // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç† (ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ãŒreadonlyã«ãªã£ãŸãŸã‚ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ä¸è¦ã«ãªã‚‹ãŒã€å¿µã®ãŸã‚æ®‹ã™)
    guessInput.addEventListener("focus", function () {
      this.select(); // å…¨é¸æŠã§å…¥åŠ›ã—ã‚„ã™ã
    });

    // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼
    document.addEventListener("keydown", function (e) {
      if (e.ctrlKey && e.key === 'n') {
        e.preventDefault();
        document.getElementById("changeNumber").click();
      }
      if (e.ctrlKey && e.key === 'h') {
        e.preventDefault();
        hintButton.click();
      }
      // Enterã‚­ãƒ¼ã§ã®å›ç­”ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ãŒreadonlyã®ãŸã‚ã€æ•°å­—ãƒœã‚¿ãƒ³ã§ã®å…¥åŠ›å¾Œã«Enterã‚’æŠ¼ã™å ´åˆã¯æ©Ÿèƒ½ã—ãªã„
      // if (e.key === "Enter" && gameActive) {
      //   submitButton.click();
      // }
      if (e.key === "Escape") {
        guessInput.blur();
      }
      // æ•°å­—ã‚­ãƒ¼ã§ã®å…¥åŠ›ã¯ã€readonlyã®ãŸã‚ç›´æ¥ã¯æ©Ÿèƒ½ã—ãªã„ãŒã€
      // å°†æ¥çš„ã«ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ã‚’å†åº¦ç·¨é›†å¯èƒ½ã«ã™ã‚‹å ´åˆã«å‚™ãˆã¦æ®‹ã™
      // if (e.key >= '0' && e.key <= '9' && gameActive) {
      //   const currentInput = guessInput.value;
      //   const maxLength = parseInt(guessInput.maxLength);
      //   if (currentInput.length < maxLength) {
      //     guessInput.value += e.key;
      //     submitButton.disabled = false;
      //   }
      // }
      // if (e.key === 'Backspace' && gameActive) {
      //   guessInput.value = guessInput.value.slice(0, -1);
      //   if (guessInput.value.length === 0) {
      //     submitButton.disabled = true;
      //   }
      // }
    });
  </script>
</body>
</html>
