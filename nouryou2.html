<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è„³æ¢ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª</title>
    <style>
        /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
            overflow-x: hidden; /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
        }

        .container {
            background: rgba(255, 255, 255, 0.95); /* å°‘ã—é€æ˜åº¦ã‚’è¿½åŠ  */
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15); /* ã‚·ãƒ£ãƒ‰ã‚¦ã‚’å¼·èª¿ */
            padding: 40px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            max-width: 900px; /* æœ€å¤§å¹…ã‚’åºƒã’ã‚‹ */
            width: 95%; /* å¹…ã‚’èª¿æ•´ */
            text-align: center;
            position: relative; /* ãƒãƒƒã‚¯ãƒœã‚¿ãƒ³ã®é…ç½®ç”¨ */
        }

        h1 {
            color: #2c5282; /* ã‚ˆã‚Šæ·±ã„é’è‰² */
            margin-bottom: 25px;
            font-size: 3em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            text-shadow: 2px 2px 6px rgba(0,0,0,0.15); /* ãƒ†ã‚­ã‚¹ãƒˆã‚·ãƒ£ãƒ‰ã‚¦ã‚’èª¿æ•´ */
        }

        .subtitle {
            color: #718096;
            margin-bottom: 40px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’å¢—åŠ  */
            font-size: 1.4em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
        }

        /* ã‚²ãƒ¼ãƒ é¸æŠç”»é¢ */
        .game-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* ãƒœã‚¿ãƒ³å¹…ã‚’èª¿æ•´ */
            gap: 25px; /* ã‚®ãƒ£ãƒƒãƒ—ã‚’èª¿æ•´ */
            margin-bottom: 40px;
        }

        .game-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 25px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.2em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.25); /* ã‚·ãƒ£ãƒ‰ã‚¦ã‚’å¼·èª¿ */
            text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆä¸­å¤®æƒãˆ */
        }

        .game-btn:hover {
            transform: translateY(-5px); /* ãƒ›ãƒãƒ¼æ™‚ã®ç§»å‹•é‡ã‚’å¢—ã‚„ã™ */
            box-shadow: 0 10px 30px rgba(0,0,0,0.35);
        }

        /* ã‚²ãƒ¼ãƒ å…±é€šã‚¨ãƒªã‚¢ */
        .game-area {
            display: none;
            margin-top: 30px;
            opacity: 0; /* åˆæœŸçŠ¶æ…‹ã¯é€æ˜ */
            transition: opacity 0.5s ease-in-out; /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³åŠ¹æœ */
        }

        .game-area.active {
            display: block;
            opacity: 1; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã«è¡¨ç¤º */
        }

        .score {
            font-size: 1.8em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            color: #2c5282;
            margin-bottom: 25px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .timer {
            font-size: 1.5em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            color: #e53e3e; /* èµ¤è‰²ã‚’ç¶­æŒ */
            margin-bottom: 25px;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .instructions {
            background: #e6fffa;
            padding: 25px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border-radius: 12px; /* è§’ä¸¸ã‚’èª¿æ•´ */
            margin-bottom: 30px;
            border-left: 6px solid #38b2ac; /* æ ç·šã‚’å¼·èª¿ */
            text-align: left; /* ãƒ†ã‚­ã‚¹ãƒˆå·¦æƒãˆ */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05); /* å†…å´ã®å½± */
        }

        .instructions h3 {
            color: #234e52;
            margin-bottom: 12px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            font-size: 1.5em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
        }

        .instructions p {
            color: #2d3748;
            line-height: 1.7; /* è¡Œé–“ã‚’åºƒã’ã‚‹ */
            font-size: 1.1em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
        }

        /* å·¦å³åŒæ™‚ã‚¿ãƒƒãƒ—ã‚²ãƒ¼ãƒ  */
        .dual-tap {
            display: flex;
            justify-content: space-around;
            align-items: center; /* ä¸­å¤®æƒãˆ */
            margin: 40px 0; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            flex-wrap: wrap; /* å¿…è¦ã«å¿œã˜ã¦æŠ˜ã‚Šè¿”ã— */
        }

        .tap-area {
            width: 180px; /* ã‚µã‚¤ã‚ºã‚’å¤§ãã */
            height: 180px; /* ã‚µã‚¤ã‚ºã‚’å¤§ãã */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease; /* ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚’é€Ÿã */
            user-select: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2); /* ã‚·ãƒ£ãƒ‰ã‚¦ã‚’è¿½åŠ  */
        }

        .left-tap {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }

        .right-tap {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }

        .tap-area:active {
            transform: scale(0.92); /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã®ç¸®å°ç‡ã‚’èª¿æ•´ */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã®ã‚·ãƒ£ãƒ‰ã‚¦ */
        }

        #tap-instruction {
            width: 100%; /* å¹…ã‚’100%ã« */
            font-size: 1.6em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            margin: 30px 0 10px 0; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            font-weight: bold;
            color: #3a0ca3; /* ã‚ˆã‚Šç›®ç«‹ã¤è‰² */
            animation: pulse 2s infinite; /* ç‚¹æ»…ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* è‰²ã¨æ–‡å­—ã®ä¸ä¸€è‡´ã‚²ãƒ¼ãƒ  */
        .color-word {
            font-size: 4em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’ã•ã‚‰ã«å¤§ãã */
            font-weight: bold;
            margin: 30px 0;
            padding: 30px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border-radius: 15px;
            background: #f7fafc;
            border: 4px solid #e2e8f0; /* æ ç·šã‚’å¤ªã */
            min-height: 120px; /* æœ€å°é«˜ã•ã‚’ç¢ºä¿ */
            display: flex; /* ä¸­å¤®æƒãˆ */
            align-items: center;
            justify-content: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px; /* ã‚®ãƒ£ãƒƒãƒ—ã‚’èª¿æ•´ */
            margin: 30px 0;
        }

        .color-btn {
            padding: 20px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border: none;
            border-radius: 12px; /* è§’ä¸¸ã‚’èª¿æ•´ */
            font-size: 1.3em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); /* ã‚·ãƒ£ãƒ‰ã‚¦ã‚’è¿½åŠ  */
        }

        .color-btn:hover {
            transform: scale(1.08); /* ãƒ›ãƒãƒ¼æ™‚ã®æ‹¡å¤§ç‡ã‚’èª¿æ•´ */
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* å·¦å³æ‰‹åŒæ™‚æç”»ã‚²ãƒ¼ãƒ  */
        .drawing-area {
            display: flex;
            justify-content: space-around;
            margin: 40px 0;
            flex-wrap: wrap; /* æŠ˜ã‚Šè¿”ã— */
            gap: 30px; /* ã‚®ãƒ£ãƒƒãƒ—ã‚’è¿½åŠ  */
        }

        .canvas-container {
            text-align: center;
            background: #f0f9ff; /* èƒŒæ™¯è‰²ã‚’è¿½åŠ  */
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        canvas {
            border: 3px solid #cce0ff; /* æ ç·šã‚’æ·¡ã„é’ã« */
            border-radius: 15px;
            cursor: crosshair;
            background: white;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1); /* å†…å´ã®å½± */
        }

        .canvas-label {
            margin-top: 15px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            font-weight: bold;
            color: #3182ce; /* é’è‰² */
            font-size: 1.1em;
        }

        .clear-btn { /* ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            background: #90cdf4; /* æ·¡ã„é’ */
            color: #2a4365;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .clear-btn:hover {
            background: #63b3ed;
            transform: translateY(-2px);
        }

        /* å·¦å³è„³é€£æºè¨ˆç®—ã‚²ãƒ¼ãƒ  */
        .calculation-area {
            background: #fefcbf; /* é»„è‰²ç³»ã®èƒŒæ™¯ */
            padding: 35px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border-radius: 18px; /* è§’ä¸¸ã‚’å¤§ãã */
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .calc-display {
            font-size: 2.5em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            margin: 25px 0;
            padding: 25px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            background: white;
            border-radius: 12px; /* è§’ä¸¸ã‚’èª¿æ•´ */
            border: 3px solid #f6e05e; /* é»„è‰²ç³»ã®æ ç·š */
            color: #a07900; /* æ–‡å­—è‰²ã‚’èª¿æ•´ */
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        .calc-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 18px; /* ã‚®ãƒ£ãƒƒãƒ—ã‚’èª¿æ•´ */
            margin: 30px 0;
        }

        .calc-btn {
            padding: 22px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border: none;
            border-radius: 12px; /* è§’ä¸¸ã‚’èª¿æ•´ */
            font-size: 1.6em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§ãã */
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2); /* ã‚·ãƒ£ãƒ‰ã‚¦ã‚’è¿½åŠ  */
        }

        .calc-btn:hover {
            transform: scale(1.08); /* ãƒ›ãƒãƒ¼æ™‚ã®æ‹¡å¤§ç‡ã‚’èª¿æ•´ */
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        /* å…±é€šã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
        .back-btn {
            background: #718096;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.15em;
            margin-top: 30px; /* ãƒãƒ¼ã‚¸ãƒ³ã‚’èª¿æ•´ */
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            display: inline-block; /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ–ãƒ­ãƒƒã‚¯ã«å¤‰æ›´ */
            position: absolute; /* çµ¶å¯¾é…ç½® */
            top: 20px;
            left: 20px;
        }

        .back-btn:hover {
            background: #4a5568;
            transform: translateY(-2px);
        }

        /* ã‚²ãƒ¼ãƒ çµ‚äº†æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .game-over-message {
            font-size: 2em;
            font-weight: bold;
            color: #dd6b20; /* ã‚ªãƒ¬ãƒ³ã‚¸è‰² */
            margin-top: 30px;
            padding: 20px;
            background-color: rgba(255, 245, 230, 0.8); /* æ·¡ã„ã‚ªãƒ¬ãƒ³ã‚¸ */
            border-radius: 10px;
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        }

        .feedback-correct {
            color: #38a169; /* ç·‘ */
            font-weight: bold;
            animation: bounce 0.5s ease;
        }

        .feedback-incorrect {
            color: #e53e3e; /* èµ¤ */
            font-weight: bold;
            animation: shake 0.5s ease;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-8px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§  è„³æ¢ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª</h1>
        <p class="subtitle">å·¦å³ã®è„³ã‚’åŒæ™‚ã«ä½¿ã£ã¦ã€è„³æ¢ã‚’æ´»æ€§åŒ–ã•ã›ã¾ã—ã‚‡ã†ï¼</p>

        <div id="menu" class="game-selector">
            <button class="game-btn" onclick="startGame('dual-tap')">å·¦å³åŒæ™‚ã‚¿ãƒƒãƒ—</button>
            <button class="game-btn" onclick="startGame('color-word')">è‰²ã¨æ–‡å­—ã®ä¸ä¸€è‡´</button>
            <button class="game-btn" onclick="startGame('dual-draw')">å·¦å³æ‰‹åŒæ™‚æç”»</button>
            <button class="game-btn" onclick="startGame('calculation')">å·¦å³è„³é€£æºè¨ˆç®—</button>
        </div>

        <div id="dual-tap" class="game-area">
            <div class="instructions">
                <h3>å·¦å³åŒæ™‚ã‚¿ãƒƒãƒ—ã‚²ãƒ¼ãƒ </h3>
                <p>è¡¨ç¤ºã•ã‚Œã‚‹æŒ‡ç¤ºã«å¾“ã„ã€å·¦å³ã®ã‚¨ãƒªã‚¢ã‚’æ­£ç¢ºãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚å·¦å³ã®è„³ã®é€£æºã¨åå¿œé€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚</p>
            </div>
            <div class="score">ã‚¹ã‚³ã‚¢: <span id="tap-score">0</span></div>
            <div class="timer">æ®‹ã‚Šæ™‚é–“: <span id="tap-timer">30</span>ç§’</div>
            <div id="tap-instruction" class="instruction-text"></div>
            <div class="dual-tap">
                <div class="tap-area left-tap" onclick="tapArea('left')">å·¦</div>
                <div class="tap-area right-tap" onclick="tapArea('right')">å³</div>
            </div>
            <div class="game-over-message" id="tap-game-over"></div>
        </div>

        <div id="color-word" class="game-area">
            <div class="instructions">
                <h3>è‰²ã¨æ–‡å­—ã®ä¸ä¸€è‡´ã‚²ãƒ¼ãƒ </h3>
                <p>è¡¨ç¤ºã•ã‚Œã‚‹æ–‡å­—ã®è‰²ã‚’ç­”ãˆã¦ãã ã•ã„ã€‚æ–‡å­—ã®æ„å‘³ï¼ˆå·¦è„³ï¼‰ã¨è‰²ï¼ˆå³è„³ï¼‰ã®ã©ã¡ã‚‰ã«æ³¨æ„ã‚’å‘ã‘ã‚‹ã‹ã§ã€è„³ã®åˆ‡ã‚Šæ›¿ãˆèƒ½åŠ›ã‚’é›ãˆã¾ã™ã€‚</p>
            </div>
            <div class="score">ã‚¹ã‚³ã‚¢: <span id="color-score">0</span></div>
            <div class="timer">æ®‹ã‚Šæ™‚é–“: <span id="color-timer">30</span>ç§’</div>
            <div class="color-word" id="color-display"></div>
            <div class="color-options">
                <button class="color-btn" style="background: #e53e3e;" onclick="selectColor('red')">èµ¤</button>
                <button class="color-btn" style="background: #38a169;" onclick="selectColor('green')">ç·‘</button>
                <button class="color-btn" style="background: #3182ce;" onclick="selectColor('blue')">é’</button>
                <button class="color-btn" style="background: #d69e2e;" onclick="selectColor('yellow')">é»„</button>
            </div>
            <div class="game-over-message" id="color-game-over"></div>
        </div>

        <div id="dual-draw" class="game-area">
            <div class="instructions">
                <h3>å·¦å³æ‰‹åŒæ™‚æç”»ã‚²ãƒ¼ãƒ </h3>
                <p>å·¦å³ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã«ã€ãã‚Œãã‚ŒæŒ‡å®šã•ã‚ŒãŸå›³å½¢ï¼ˆå·¦ï¼šå††ã€å³ï¼šå››è§’ï¼‰ã‚’åŒæ™‚ã«æã„ã¦ãã ã•ã„ã€‚ä¸¡æ‰‹ã®å”èª¿æ€§ã¨ã€ç©ºé–“èªè­˜èƒ½åŠ›ã‚’é¤Šã„ã¾ã™ã€‚</p>
            </div>
            <div class="score">ã‚¹ã‚³ã‚¢: <span id="draw-score">0</span></div>
            <div class="timer">æ®‹ã‚Šæ™‚é–“: <span id="draw-timer">60</span>ç§’</div>
            <div class="drawing-area">
                <div class="canvas-container">
                    <canvas id="leftCanvas" width="200" height="200"></canvas>
                    <div class="canvas-label">å·¦æ‰‹: å††ã‚’æã</div>
                </div>
                <div class="canvas-container">
                    <canvas id="rightCanvas" width="200" height="200"></canvas>
                    <div class="canvas-label">å³æ‰‹: å››è§’ã‚’æã</div>
                </div>
            </div>
            <button class="clear-btn" onclick="clearCanvas()">ã‚¯ãƒªã‚¢</button>
            <div class="game-over-message" id="draw-game-over"></div>
        </div>

        <div id="calculation" class="game-area">
            <div class="instructions">
                <h3>å·¦å³è„³é€£æºè¨ˆç®—ã‚²ãƒ¼ãƒ </h3>
                <p>è¡¨ç¤ºã•ã‚Œã‚‹è¨ˆç®—å¼ã®ç­”ãˆã‚’ã€é¸æŠè‚¢ã®ä¸­ã‹ã‚‰ç´ æ—©ãé¸ã‚“ã§ãã ã•ã„ã€‚è«–ç†çš„æ€è€ƒï¼ˆå·¦è„³ï¼‰ã¨ã€è¦–è¦šçš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ï¼ˆå³è„³ï¼‰ã‚’åŒæ™‚ã«ä½¿ã„ã¾ã™ã€‚</p>
            </div>
            <div class="score">ã‚¹ã‚³ã‚¢: <span id="calc-score">0</span></div>
            <div class="timer">æ®‹ã‚Šæ™‚é–“: <span id="calc-timer">30</span>ç§’</div>
            <div class="calculation-area">
                <div class="calc-display" id="calc-display"></div>
                <div class="calc-options" id="calc-options">
                    </div>
            </div>
            <div class="game-over-message" id="calc-game-over"></div>
        </div>

        <button class="back-btn" onclick="showMenu()" id="back-to-menu">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</button>
    </div>

    <script>
        let currentGame = null;
        let gameTimer = null;
        let scores = {
            'dual-tap': 0,
            'color-word': 0,
            'dual-draw': 0,
            'calculation': 0
        };
        const gameDurations = {
            'dual-tap': 30,
            'color-word': 30,
            'dual-draw': 60,
            'calculation': 30
        };

        // è‰²ã¨æ–‡å­—ã®ä¸ä¸€è‡´ã‚²ãƒ¼ãƒ ç”¨
        const colors = ['red', 'green', 'blue', 'yellow'];
        const colorNames = ['èµ¤', 'ç·‘', 'é’', 'é»„'];
        const colorValues = ['#e53e3e', '#38a169', '#3182ce', '#d69e2e'];

        // å·¦å³æ‰‹åŒæ™‚æç”»ã‚²ãƒ¼ãƒ ç”¨
        let leftCtx, rightCtx;
        let isDrawing = false;
        let lastLeftPos = { x: 0, y: 0 };
        let lastRightPos = { x: 0, y: 0 };
        let leftDrawCount = 0; // å·¦æ‰‹æç”»æ•°
        let rightDrawCount = 0; // å³æ‰‹æç”»æ•°
        const MAX_DRAWS_PER_GAME = 10; // æç”»å›æ•°ã®ä¸Šé™

        // å·¦å³è„³é€£æºè¨ˆç®—ã‚²ãƒ¼ãƒ ç”¨
        let currentCorrectAnswer = 0;

        // --- ã‚²ãƒ¼ãƒ å…±é€šå‡¦ç† ---
        function startGame(gameType) {
            currentGame = gameType;
            document.getElementById('menu').style.display = 'none';
            document.getElementById(gameType).classList.add('active');
            document.getElementById('back-to-menu').style.display = 'block'; // always show back button

            scores[gameType] = 0;
            updateScore(gameType);
            resetGameOverMessage(gameType); // ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ

            switch(gameType) {
                case 'dual-tap':
                    startDualTapGame();
                    break;
                case 'color-word':
                    startColorWordGame();
                    break;
                case 'dual-draw':
                    startDualDrawGame();
                    break;
                case 'calculation':
                    startCalculationGame();
                    break;
            }
        }

        function showMenu() {
            currentGame = null;
            document.getElementById('menu').style.display = 'grid';
            document.querySelectorAll('.game-area').forEach(area => {
                area.classList.remove('active');
            });
            document.getElementById('back-to-menu').style.display = 'none';

            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
        }

        function updateScore(gameType) {
            const scoreElement = document.getElementById(gameType.replace('-', '-') + '-score');
            if (scoreElement) {
                scoreElement.textContent = scores[gameType];
            }
        }

        function resetGameOverMessage(gameType) {
            const messageElement = document.getElementById(`${gameType}-game-over`);
            if (messageElement) {
                messageElement.style.display = 'none';
                messageElement.textContent = '';
            }
        }

        function showGameOver(gameType, finalScore) {
            const messageElement = document.getElementById(`${gameType}-game-over`);
            if (messageElement) {
                messageElement.textContent = `æ™‚é–“åˆ‡ã‚Œï¼æœ€çµ‚ã‚¹ã‚³ã‚¢: ${finalScore}`;
                messageElement.style.display = 'block';
            }
        }

        function startTimer(gameType, duration) {
            let timeLeft = duration;
            const timerElement = document.getElementById(gameType.replace('-', '-') + '-timer');

            if (gameTimer) clearInterval(gameTimer); // æ—¢å­˜ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢

            gameTimer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    gameTimer = null;
                    showGameOver(gameType, scores[gameType]); // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
                    setTimeout(() => { // å°‘ã—é…å»¶ã•ã›ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹
                        alert(`æ™‚é–“åˆ‡ã‚Œï¼ ${gameType.replace('-', ' ')} ã®ã‚¹ã‚³ã‚¢: ${scores[gameType]}`);
                        showMenu();
                    }, 1500);
                }
            }, 1000);
        }

        // --- å·¦å³åŒæ™‚ã‚¿ãƒƒãƒ—ã‚²ãƒ¼ãƒ  ---
        let tapInstructionIndex = 0;
        const tapInstructions = [
            { text: 'å·¦å³åŒæ™‚ã«ã‚¿ãƒƒãƒ—ï¼', target: 'both' },
            { text: 'å·¦ã ã‘ã‚¿ãƒƒãƒ—ï¼', target: 'left' },
            { text: 'å³ã ã‘ã‚¿ãƒƒãƒ—ï¼', target: 'right' },
            { text: 'å·¦ã¨å³ã‚’åŒæ™‚ã«ï¼', target: 'both' },
            { text: 'å³ã ã‘ã€ç´ æ—©ãï¼', target: 'right' },
            { text: 'å·¦ã¨å³ã€æ­£ç¢ºã«ï¼', target: 'both' }
        ];

        function startDualTapGame() {
            scores['dual-tap'] = 0;
            updateScore('dual-tap');
            startTimer('dual-tap', gameDurations['dual-tap']);
            showTapInstruction();
        }

        function showTapInstruction() {
            const instructionElement = document.getElementById('tap-instruction');
            if (currentGame !== 'dual-tap' || !instructionElement) return;

            const instruction = tapInstructions[tapInstructionIndex % tapInstructions.length];
            instructionElement.textContent = instruction.text;
            instructionElement.dataset.target = instruction.target; // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’dataå±æ€§ã«ä¿å­˜

            // æ¬¡ã®æŒ‡ç¤ºã¾ã§ã®æ™‚é–“ï¼ˆæŒ‡ç¤ºå†…å®¹ã«ã‚ˆã£ã¦å¤‰å‹•ï¼‰
            let nextInstructionDelay = 2000;
            if (instruction.target === 'both') nextInstructionDelay = 2500;
            if (instruction.target === 'left' || instruction.target === 'right') nextInstructionDelay = 1800;

            setTimeout(() => {
                if (currentGame === 'dual-tap') {
                    tapInstructionIndex++;
                    showTapInstruction();
                }
            }, nextInstructionDelay);
        }

        function tapArea(side) {
            if (currentGame !== 'dual-tap') return;

            const instructionElement = document.getElementById('tap-instruction');
            const target = instructionElement.dataset.target;
            let points = 0;

            // æ­£ã—ã„ã‚¿ãƒƒãƒ—ã‹åˆ¤å®š
            if (target === 'both') {
                // ä¸¡æ‰‹ã‚¿ãƒƒãƒ—ã®æŒ‡ç¤ºã®å ´åˆã€ä¸¡æ–¹ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸã‹ï¼ˆã“ã“ã§ã¯ç‰‡æ–¹ã‚¿ãƒƒãƒ—ã®ã¿ãªã®ã§ã€ç‰‡æ–¹ã‚¿ãƒƒãƒ—ã¯ä¸æ­£è§£ï¼‰
                // å®Ÿéš›ã«ã¯ä¸¡æ‰‹åŒæ™‚ã‚¿ãƒƒãƒ—ã‚’æ¤œçŸ¥ã™ã‚‹ä»•çµ„ã¿ãŒå¿…è¦ã ãŒã€ã“ã®å®Ÿè£…ã§ã¯ç°¡ç•¥åŒ–
                // ã‚‚ã—ç‰‡æ–¹ã ã‘ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸã‚‰ã€ãƒšãƒŠãƒ«ãƒ†ã‚£
                points = -5; // ä¸¡æ‰‹ã‚¿ãƒƒãƒ—æŒ‡ç¤ºã§ç‰‡æ–¹ã®ã¿ã¯ä¸æ­£è§£
                // å®Ÿéš›ã«ã¯ã€ä¸¡æ–¹ã®ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œçŸ¥ã—ã€çŸ­æ™‚é–“å·®ã§ç™ºç”Ÿã—ãŸå ´åˆã®ã¿æˆåŠŸã¨ã™ã‚‹
            } else if (target === side) {
                points = 10; // æŒ‡ç¤ºé€šã‚Šã®ç‰‡æ‰‹ã‚¿ãƒƒãƒ—
            } else {
                points = -3; // æŒ‡ç¤ºã¨é•ã†ã‚¿ãƒƒãƒ—
            }

            scores['dual-tap'] += points;
            scores['dual-tap'] = Math.max(0, scores['dual-tap']); // ã‚¹ã‚³ã‚¢ã¯0ä»¥ä¸‹ã«ãªã‚‰ãªã„
            updateScore('dual-tap');

            // ã‚¿ãƒƒãƒ—æ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            const feedbackClass = points >= 0 ? 'feedback-correct' : 'feedback-incorrect';
            const tappedElement = side === 'left' ? document.querySelector('.left-tap') : document.querySelector('.right-tap');
            tappedElement.classList.add(feedbackClass);
            setTimeout(() => {
                tappedElement.classList.remove(feedbackClass);
            }, 500);

            // ä¸¡æ‰‹ã‚¿ãƒƒãƒ—æŒ‡ç¤ºæ™‚ã®è¿½åŠ ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
            if (target === 'both' && side === 'left') { // å·¦ã‚¿ãƒƒãƒ—æ™‚ã«ä¸¡æ‰‹æŒ‡ç¤ºãªã‚‰ã€å³ã‚¿ãƒƒãƒ—ã‚‚æœŸå¾…
                // ã“ã“ã§å³ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…ã¤ã€ã¾ãŸã¯å³ã‚¿ãƒƒãƒ—ã‚‚åŒæ™‚ã«å®Ÿè¡Œã•ã‚ŒãŸã¨è¦‹ãªã™
                // ä»Šå›ã¯ç°¡ç•¥åŒ–ã®ãŸã‚ã€å·¦ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸã‚‰æŒ‡ç¤ºã¨ã—ã¦è¨˜éŒ²ã—ã€å³ã‚¿ãƒƒãƒ—ã‚‚åŒæ™‚ã«è¡Œã‚ã‚ŒãŸã¨ä»®å®šï¼ˆå®Ÿéš›ã¯ç„¡ç†ï¼‰
                // ã‚ˆã‚Šé«˜åº¦ãªå®Ÿè£…ã§ã¯ã€å·¦å³ã®ã‚¿ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã‚’åˆ¥ã€…ã«ç®¡ç†ã—ã€ä¸¡æ–¹ãŒçŸ­æ™‚é–“å†…ã«ç™ºç”Ÿã—ãŸã‹ã‚’åˆ¤å®š
                // ã“ã®å®Ÿè£…ã§ã¯ã€å·¦ã‚¿ãƒƒãƒ—æ™‚ã«æŒ‡ç¤ºãŒbothãªã‚‰ã€æˆåŠŸï¼ˆç°¡ç•¥åŒ–ï¼‰
                 scores['dual-tap'] += 10; // è¿½åŠ ãƒã‚¤ãƒ³ãƒˆ
                 updateScore('dual-tap');
                 instructionElement.classList.add('feedback-correct');
                 setTimeout(() => { instructionElement.classList.remove('feedback-correct'); }, 500);
            }
        }

        // --- è‰²ã¨æ–‡å­—ã®ä¸ä¸€è‡´ã‚²ãƒ¼ãƒ  ---
        function startColorWordGame() {
            scores['color-word'] = 0;
            updateScore('color-word');
            startTimer('color-word', gameDurations['color-word']);
            showColorWord();
        }

        function showColorWord() {
            const display = document.getElementById('color-display');
            const randomIndex = Math.floor(Math.random() * colors.length);
            const randomColorNameIndex = Math.floor(Math.random() * colorNames.length);

            display.textContent = colorNames[randomColorNameIndex];
            display.style.color = colorValues[randomIndex];

            // ãƒœã‚¿ãƒ³ã®è‰²ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é…ç½®
            const buttons = document.querySelectorAll('.color-options .color-btn');
            const shuffledColors = [...colorValues].sort(() => Math.random() - 0.5);
            buttons.forEach((button, index) => {
                button.style.backgroundColor = shuffledColors[index];
                // ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã¯å›ºå®šï¼ˆèµ¤ã€ç·‘ã€é’ã€é»„ï¼‰
            });
        }

        function selectColor(selectedColorName) {
            if (currentGame !== 'color-word') return;

            const display = document.getElementById('color-display');
            const displayedColorValue = display.style.color; // ä¾‹: "rgb(229, 62, 62)"
            const displayedColorName = colorNames[colorValues.indexOf(displayedColorValue)]; // ä¾‹: "èµ¤"

            // é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®è‰²ã«å¯¾å¿œã™ã‚‹å€¤ã‚’å–å¾—
            const selectedButton = Array.from(document.querySelectorAll('.color-options .color-btn')).find(btn => btn.style.backgroundColor === colorValues[colors.indexOf(selectedColorName)]);
            const selectedColorValue = selectedButton ? selectedButton.style.backgroundColor : '';

            let points = 0;
            if (selectedColorName === colors[colorValues.indexOf(displayedColorValue)]) {
                points = 10; // æ­£è§£
            } else {
                points = -3; // ä¸æ­£è§£
            }

            scores['color-word'] += points;
            scores['color-word'] = Math.max(0, scores['color-word']);
            updateScore('color-word');

            // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            const feedbackClass = points >= 0 ? 'feedback-correct' : 'feedback-incorrect';
            display.classList.add(feedbackClass);
            setTimeout(() => {
                display.classList.remove(feedbackClass);
                if (points >= 0) { // æ­£è§£æ™‚ã®ã¿æ¬¡ã®å•é¡Œã¸
                    showColorWord();
                }
            }, 700);
        }

        // --- å·¦å³æ‰‹åŒæ™‚æç”»ã‚²ãƒ¼ãƒ  ---
        function startDualDrawGame() {
            scores['dual-draw'] = 0;
            leftDrawCount = 0;
            rightDrawCount = 0;
            updateScore('dual-draw');
            startTimer('dual-draw', gameDurations['dual-draw']);
            setupDrawingCanvas();
        }

        function setupDrawingCanvas() {
            const leftCanvas = document.getElementById('leftCanvas');
            const rightCanvas = document.getElementById('rightCanvas');

            leftCtx = leftCanvas.getContext('2d');
            rightCtx = rightCanvas.getContext('2d');

            // åˆæœŸçŠ¶æ…‹ã®ãƒªã‚»ãƒƒãƒˆ
            leftCtx.clearRect(0, 0, leftCanvas.width, leftCanvas.height);
            rightCtx.clearRect(0, 0, rightCanvas.width, rightCanvas.height);
            leftCtx.lineCap = rightCtx.lineCap = 'round'; // ç·šã‚’æ»‘ã‚‰ã‹ã«
            leftCtx.lineWidth = rightCtx.lineWidth = 5; // ç·šå¹…

            const canvases = [leftCanvas, rightCanvas];
            canvases.forEach((canvas, index) => {
                const ctx = canvas.getContext('2d');
                const isLeftCanvas = canvas.id === 'leftCanvas';

                canvas.addEventListener('mousedown', (e) => {
                    if (isDrawing) return; // æç”»ä¸­ã¯ç„¡è¦–
                    if (isLeftCanvas && leftDrawCount >= MAX_DRAWS_PER_GAME) return; // ä¸Šé™ã«é”ã—ãŸã‚‰æç”»ä¸å¯
                    if (!isLeftCanvas && rightDrawCount >= MAX_DRAWS_PER_GAME) return;

                    isDrawing = true;
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    if (isLeftCanvas) {
                        leftCtx.beginPath();
                        leftCtx.arc(x, y, 20, 0, 2 * Math.PI);
                        leftCtx.fillStyle = '#ff6b6b';
                        leftCtx.fill();
                        lastLeftPos = { x, y };
                        leftDrawCount++; // æç”»æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
                    } else {
                        rightCtx.fillStyle = '#4ecdc4';
                        rightCtx.fillRect(x - 20, y - 20, 40, 40);
                        lastRightPos = { x, y };
                        rightDrawCount++; // æç”»æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
                    }
                });

                canvas.addEventListener('mousemove', (e) => {
                    if (!isDrawing) return;
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    if (isLeftCanvas) {
                        leftCtx.beginPath();
                        leftCtx.arc(x, y, 15, 0, 2 * Math.PI);
                        leftCtx.fillStyle = '#ff6b6b';
                        leftCtx.fill();
                        lastLeftPos = { x, y };
                    } else {
                        rightCtx.fillStyle = '#4ecdc4';
                        rightCtx.fillRect(x - 15, y - 15, 30, 30);
                        lastRightPos = { x, y };
                    }
                });

                canvas.addEventListener('mouseup', () => {
                    isDrawing = false;
                });
                canvas.addEventListener('mouseout', () => { // ãƒã‚¦ã‚¹ãŒã‚­ãƒ£ãƒ³ãƒã‚¹å¤–ã«å‡ºãŸå ´åˆ
                    isDrawing = false;
                });
            });
        }

        function clearCanvas() {
            if (leftCtx && rightCtx) {
                leftCtx.clearRect(0, 0, leftCanvas.width, leftCanvas.height);
                rightCtx.clearRect(0, 0, rightCanvas.width, rightCanvas.height);
                leftDrawCount = 0; // ã‚«ã‚¦ãƒ³ãƒˆãƒªã‚»ãƒƒãƒˆ
                rightDrawCount = 0;
            }
        }

        // æç”»å®Œäº†åˆ¤å®šï¼ˆç°¡æ˜“ç‰ˆï¼‰
        function checkDrawingCompletion() {
            if (leftDrawCount >= MAX_DRAWS_PER_GAME && rightDrawCount >= MAX_DRAWS_PER_GAME) {
                // æç”»å®Œäº†æ™‚ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆã“ã“ã§ã¯ç°¡æ˜“çš„ã«ã€æç”»æ•°ã«å¿œã˜ã¦ã‚¹ã‚³ã‚¢åŠ ç®—ï¼‰
                scores['dual-draw'] += 50; // ãƒœãƒ¼ãƒŠã‚¹ã‚¹ã‚³ã‚¢
                updateScore('dual-draw');
                alert('æç”»å®Œäº†ï¼ãƒœãƒ¼ãƒŠã‚¹ã‚¹ã‚³ã‚¢ç²å¾—ï¼');
                // å¿…è¦ã§ã‚ã‚Œã°ã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢ã—ã€æ¬¡ã®ã‚²ãƒ¼ãƒ ã¸é€²ã‚€
            }
        }

        // --- å·¦å³è„³é€£æºè¨ˆç®—ã‚²ãƒ¼ãƒ  ---
        function startCalculationGame() {
            scores['calculation'] = 0;
            updateScore('calculation');
            startTimer('calculation', gameDurations['calculation']);
            generateCalculationProblem();
        }

        function generateCalculationProblem() {
            const num1 = Math.floor(Math.random() * 15) + 1; // ç¯„å›²ã‚’åºƒã’ã‚‹
            const num2 = Math.floor(Math.random() * 15) + 1;
            const operations = ['+', '-', 'Ã—', 'Ã·']; // æ›ã‘ç®—ã€å‰²ã‚Šç®—ã‚‚è¿½åŠ 
            const operation = operations[Math.floor(Math.random() * operations.length)];

            let correctAnswer = 0;
            let displayProblem = `${num1} ${operation} ${num2}`;

            switch (operation) {
                case '+':
                    correctAnswer = num1 + num2;
                    break;
                case '-':
                    // å¼•ãç®—ã¯çµæœãŒè² ã«ãªã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´
                    if (num1 < num2) {
                        [num1, num2] = [num2, num1]; // å…¥ã‚Œæ›¿ãˆ
                        displayProblem = `${num1} - ${num2}`;
                    }
                    correctAnswer = num1 - num2;
                    break;
                case 'Ã—':
                    correctAnswer = num1 * num2;
                    break;
                case 'Ã·':
                    // å‰²ã‚Šç®—ã¯çµæœãŒæ•´æ•°ã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´
                    let divisor = Math.floor(Math.random() * 10) + 1;
                    let dividend = divisor * (Math.floor(Math.random() * 10) + 1);
                    num1 = dividend;
                    num2 = divisor;
                    displayProblem = `${num1} Ã· ${num2}`;
                    correctAnswer = num1 / num2;
                    break;
            }

            // é¸æŠè‚¢ã®ç”Ÿæˆ
            let wrongAnswers = [];
            while (wrongAnswers.length < 2) {
                let potentialWrongAnswer;
                if (operation === 'Ã·') {
                    potentialWrongAnswer = correctAnswer + Math.floor(Math.random() * 4) - 2; // å‰²ã‚Šç®—ã®å ´åˆã€è¿‘ã„å€¤
                    if (potentialWrongAnswer === correctAnswer || potentialWrongAnswer <= 0) continue; // é‡è¤‡ã‚„éæ­£ã®å€¤ã¯é™¤å¤–
                } else {
                    potentialWrongAnswer = correctAnswer + Math.floor(Math.random() * 5) - 2; // +1, -1, +2, -2, 0
                    if (potentialWrongAnswer === correctAnswer || potentialWrongAnswer < 0) continue; // é‡è¤‡ã‚„è² ã®å€¤ã¯é™¤å¤–
                }
                if (!wrongAnswers.includes(potentialWrongAnswer)) {
                    wrongAnswers.push(potentialWrongAnswer);
                }
            }
            const options = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);

            document.getElementById('calc-display').textContent = displayProblem;

            // ãƒœã‚¿ãƒ³ã®å€¤ã‚’æ›´æ–°
            const buttonsContainer = document.getElementById('calc-options');
            buttonsContainer.innerHTML = ''; // æ—¢å­˜ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªã‚¢
            options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('calc-btn');
                button.textContent = option;
                button.onclick = () => selectAnswer(option);
                buttonsContainer.appendChild(button);
            });

            currentCorrectAnswer = correctAnswer; // ç¾åœ¨ã®æ­£è§£ã‚’ä¿æŒ
        }

        function selectAnswer(selectedAnswer) {
            if (currentGame !== 'calculation') return;

            let points = 0;
            if (selectedAnswer === currentCorrectAnswer) {
                points = 10; // æ­£è§£
            } else {
                points = -3; // ä¸æ­£è§£
            }

            scores['calculation'] += points;
            scores['calculation'] = Math.max(0, scores['calculation']);
            updateScore('calculation');

            // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            const buttons = document.querySelectorAll('#calculation .calc-btn');
            buttons.forEach(btn => {
                if (parseInt(btn.textContent) === currentCorrectAnswer) {
                    btn.classList.add('feedback-correct');
                } else if (parseInt(btn.textContent) === selectedAnswer) {
                    btn.classList.add('feedback-incorrect');
                }
            });

            setTimeout(() => {
                buttons.forEach(btn => {
                    btn.classList.remove('feedback-correct', 'feedback-incorrect');
                });
                if (points >= 0) { // æ­£è§£æ™‚ã®ã¿æ¬¡ã®å•é¡Œã¸
                    generateCalculationProblem();
                }
            }, 700);
        }

        // --- åˆæœŸåŒ– ---
        window.onload = () => {
            // å¿…è¦ã«å¿œã˜ã¦åˆæœŸåŒ–å‡¦ç†ã‚’è¿½åŠ 
        };

    </script>
</body>
</html>
